ARM GAS  C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"MPU6050.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.MPU6050_Init,"ax",%progbits
  18              		.align	1
  19              		.global	MPU6050_Init
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	MPU6050_Init:
  27              	.LFB130:
  28              		.file 1 "Core/Src/MPU6050.c"
   1:Core/Src/MPU6050.c **** 
   2:Core/Src/MPU6050.c **** #include "MPU6050.h"
   3:Core/Src/MPU6050.c **** 
   4:Core/Src/MPU6050.c **** 
   5:Core/Src/MPU6050.c **** void MPU6050_Init (void)
   6:Core/Src/MPU6050.c **** {
  29              		.loc 1 6 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 24
  36              		.cfi_offset 4, -24
  37              		.cfi_offset 5, -20
  38              		.cfi_offset 6, -16
  39              		.cfi_offset 7, -12
  40              		.cfi_offset 8, -8
  41              		.cfi_offset 14, -4
  42 0004 86B0     		sub	sp, sp, #24
  43              	.LCFI1:
  44              		.cfi_def_cfa_offset 48
   7:Core/Src/MPU6050.c **** 	uint8_t check;
  45              		.loc 1 7 2 view .LVU1
   8:Core/Src/MPU6050.c **** 	uint8_t Data;
  46              		.loc 1 8 2 view .LVU2
   9:Core/Src/MPU6050.c **** 
  10:Core/Src/MPU6050.c **** 
  11:Core/Src/MPU6050.c **** 	HAL_I2C_Mem_Read (&I2CHandle, MPU6050_ADDR,WHO_AM_I_REG,1, &check, 1, 1000);
  47              		.loc 1 11 2 view .LVU3
ARM GAS  C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s 			page 2


  48 0006 4FF47A73 		mov	r3, #1000
  49 000a 0293     		str	r3, [sp, #8]
  50 000c 0123     		movs	r3, #1
  51 000e 0193     		str	r3, [sp, #4]
  52 0010 0DF11702 		add	r2, sp, #23
  53 0014 0092     		str	r2, [sp]
  54 0016 7522     		movs	r2, #117
  55 0018 D021     		movs	r1, #208
  56 001a 1A48     		ldr	r0, .L5
  57 001c FFF7FEFF 		bl	HAL_I2C_Mem_Read
  58              	.LVL0:
  12:Core/Src/MPU6050.c **** 
  13:Core/Src/MPU6050.c **** 	if ((check<<1) == MPU6050_ADDR)  // 0x68 will be returned by the sensor if everything goes well
  59              		.loc 1 13 2 view .LVU4
  60              		.loc 1 13 12 is_stmt 0 view .LVU5
  61 0020 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
  62              		.loc 1 13 5 view .LVU6
  63 0024 682B     		cmp	r3, #104
  64 0026 02D0     		beq	.L4
  65              	.L1:
  14:Core/Src/MPU6050.c **** 	{
  15:Core/Src/MPU6050.c **** 		// power management register 0X6B we should write all 0's to wake the sensor up
  16:Core/Src/MPU6050.c **** 		Data = 0;
  17:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, PWR_MGMT_1_REG, 1,&Data, 1, 1000);
  18:Core/Src/MPU6050.c **** 
  19:Core/Src/MPU6050.c **** 	
  20:Core/Src/MPU6050.c **** 
  21:Core/Src/MPU6050.c **** 		// Set DATA RATE of 1KHz by writing SMPLRT_DIV register
  22:Core/Src/MPU6050.c **** 		Data = 0x07;
  23:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, SMPLRT_DIV_REG, 1, &Data, 1, 1000);
  24:Core/Src/MPU6050.c **** 
  25:Core/Src/MPU6050.c **** 		// Set Gyroscopic configuration in GYRO_CONFIG Register
  26:Core/Src/MPU6050.c **** 		// XG_ST=0,YG_ST=0,ZG_ST=0, FS_SEL=0 -> ± 250 °/s
  27:Core/Src/MPU6050.c **** 		Data = 0x00;
  28:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, GYRO_CONFIG_REG, 1, &Data, 1, 1000);
  29:Core/Src/MPU6050.c **** 	}
  30:Core/Src/MPU6050.c **** 
  31:Core/Src/MPU6050.c **** }
  66              		.loc 1 31 1 view .LVU7
  67 0028 06B0     		add	sp, sp, #24
  68              	.LCFI2:
  69              		.cfi_remember_state
  70              		.cfi_def_cfa_offset 24
  71              		@ sp needed
  72 002a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
  73              	.L4:
  74              	.LCFI3:
  75              		.cfi_restore_state
  16:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, PWR_MGMT_1_REG, 1,&Data, 1, 1000);
  76              		.loc 1 16 3 is_stmt 1 view .LVU8
  16:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, PWR_MGMT_1_REG, 1,&Data, 1, 1000);
  77              		.loc 1 16 8 is_stmt 0 view .LVU9
  78 002e 4FF00008 		mov	r8, #0
  79 0032 8DF81680 		strb	r8, [sp, #22]
  17:Core/Src/MPU6050.c **** 
  80              		.loc 1 17 3 is_stmt 1 view .LVU10
  81 0036 134D     		ldr	r5, .L5
ARM GAS  C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s 			page 3


  82 0038 4FF47A77 		mov	r7, #1000
  83 003c 0297     		str	r7, [sp, #8]
  84 003e 0124     		movs	r4, #1
  85 0040 0194     		str	r4, [sp, #4]
  86 0042 0DF11606 		add	r6, sp, #22
  87 0046 0096     		str	r6, [sp]
  88 0048 2346     		mov	r3, r4
  89 004a 6B22     		movs	r2, #107
  90 004c D021     		movs	r1, #208
  91 004e 2846     		mov	r0, r5
  92 0050 FFF7FEFF 		bl	HAL_I2C_Mem_Write
  93              	.LVL1:
  22:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, SMPLRT_DIV_REG, 1, &Data, 1, 1000);
  94              		.loc 1 22 3 view .LVU11
  22:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, SMPLRT_DIV_REG, 1, &Data, 1, 1000);
  95              		.loc 1 22 8 is_stmt 0 view .LVU12
  96 0054 0723     		movs	r3, #7
  97 0056 8DF81630 		strb	r3, [sp, #22]
  23:Core/Src/MPU6050.c **** 
  98              		.loc 1 23 3 is_stmt 1 view .LVU13
  99 005a 0297     		str	r7, [sp, #8]
 100 005c 0194     		str	r4, [sp, #4]
 101 005e 0096     		str	r6, [sp]
 102 0060 2346     		mov	r3, r4
 103 0062 1922     		movs	r2, #25
 104 0064 D021     		movs	r1, #208
 105 0066 2846     		mov	r0, r5
 106 0068 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 107              	.LVL2:
  27:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, GYRO_CONFIG_REG, 1, &Data, 1, 1000);
 108              		.loc 1 27 3 view .LVU14
  27:Core/Src/MPU6050.c **** 		HAL_I2C_Mem_Write(&I2CHandle, MPU6050_ADDR, GYRO_CONFIG_REG, 1, &Data, 1, 1000);
 109              		.loc 1 27 8 is_stmt 0 view .LVU15
 110 006c 8DF81680 		strb	r8, [sp, #22]
  28:Core/Src/MPU6050.c **** 	}
 111              		.loc 1 28 3 is_stmt 1 view .LVU16
 112 0070 0297     		str	r7, [sp, #8]
 113 0072 0194     		str	r4, [sp, #4]
 114 0074 0096     		str	r6, [sp]
 115 0076 2346     		mov	r3, r4
 116 0078 1B22     		movs	r2, #27
 117 007a D021     		movs	r1, #208
 118 007c 2846     		mov	r0, r5
 119 007e FFF7FEFF 		bl	HAL_I2C_Mem_Write
 120              	.LVL3:
 121              		.loc 1 31 1 is_stmt 0 view .LVU17
 122 0082 D1E7     		b	.L1
 123              	.L6:
 124              		.align	2
 125              	.L5:
 126 0084 00000000 		.word	I2CHandle
 127              		.cfi_endproc
 128              	.LFE130:
 130              		.global	__aeabi_i2d
 131              		.global	__aeabi_ddiv
 132              		.global	__aeabi_d2f
 133              		.section	.text.MPU6050_Read_Gyro,"ax",%progbits
ARM GAS  C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s 			page 4


 134              		.align	1
 135              		.global	MPU6050_Read_Gyro
 136              		.syntax unified
 137              		.thumb
 138              		.thumb_func
 139              		.fpu fpv4-sp-d16
 141              	MPU6050_Read_Gyro:
 142              	.LFB131:
  32:Core/Src/MPU6050.c **** // uint8_t high;
  33:Core/Src/MPU6050.c **** // 	uint8_t low;
  34:Core/Src/MPU6050.c **** // 	HAL_I2C_Mem_Read (&I2CHandle, MPU6050_ADDR, 0x43, 1, &high, 1, 1000);
  35:Core/Src/MPU6050.c **** // 	HAL_I2C_Mem_Read (&I2CHandle, MPU6050_ADDR, 0x44, 1, &low, 1, 1000);
  36:Core/Src/MPU6050.c **** // Gyro_Y_RAW = (int16_t)(high << 8 | low);
  37:Core/Src/MPU6050.c **** void MPU6050_Read_Gyro (void)
  38:Core/Src/MPU6050.c **** {
 143              		.loc 1 38 1 is_stmt 1 view -0
 144              		.cfi_startproc
 145              		@ args = 0, pretend = 0, frame = 8
 146              		@ frame_needed = 0, uses_anonymous_args = 0
 147 0000 00B5     		push	{lr}
 148              	.LCFI4:
 149              		.cfi_def_cfa_offset 4
 150              		.cfi_offset 14, -4
 151 0002 87B0     		sub	sp, sp, #28
 152              	.LCFI5:
 153              		.cfi_def_cfa_offset 32
  39:Core/Src/MPU6050.c **** 	//for debugging
  40:Core/Src/MPU6050.c **** 	if(HAL_OK ==HAL_I2C_IsDeviceReady(&I2CHandle,MPU6050_ADDR,20,1000)){
 154              		.loc 1 40 2 view .LVU19
 155              		.loc 1 40 14 is_stmt 0 view .LVU20
 156 0004 4FF47A73 		mov	r3, #1000
 157 0008 1422     		movs	r2, #20
 158 000a D021     		movs	r1, #208
 159 000c 1648     		ldr	r0, .L11+8
 160 000e FFF7FEFF 		bl	HAL_I2C_IsDeviceReady
 161              	.LVL4:
 162              		.loc 1 40 4 view .LVU21
 163 0012 10B1     		cbz	r0, .L10
 164              	.L7:
  41:Core/Src/MPU6050.c **** 	uint8_t Gyro_x_Data[2];	
  42:Core/Src/MPU6050.c **** 	// Read 2 BYTES of data starting from GYRO_XOUT_H register
  43:Core/Src/MPU6050.c **** 	HAL_I2C_Mem_Read(&I2CHandle, MPU6050_ADDR, 0x43, 1, Gyro_x_Data, 2, 1000);
  44:Core/Src/MPU6050.c **** 	
  45:Core/Src/MPU6050.c **** 
  46:Core/Src/MPU6050.c **** 	//Gyro_x_Data[0] holds high bits, shift to left by 8 and or with low bits for total raw value
  47:Core/Src/MPU6050.c **** 	Gyro_Y_RAW = (int16_t)(Gyro_x_Data[0] << 8 | Gyro_x_Data[1]);
  48:Core/Src/MPU6050.c ****     //set the the scale of gyro to +-250 by setting FS_Sel to zero
  49:Core/Src/MPU6050.c ****     //this results in sensitivity of 131 LSB so we must divide raw value by 131
  50:Core/Src/MPU6050.c **** 	GyroY = Gyro_Y_RAW/131.0;
  51:Core/Src/MPU6050.c **** 
  52:Core/Src/MPU6050.c **** }
  53:Core/Src/MPU6050.c **** }
 165              		.loc 1 53 1 view .LVU22
 166 0014 07B0     		add	sp, sp, #28
 167              	.LCFI6:
 168              		.cfi_remember_state
 169              		.cfi_def_cfa_offset 4
ARM GAS  C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s 			page 5


 170              		@ sp needed
 171 0016 5DF804FB 		ldr	pc, [sp], #4
 172              	.L10:
 173              	.LCFI7:
 174              		.cfi_restore_state
 175              	.LBB2:
  41:Core/Src/MPU6050.c **** 	uint8_t Gyro_x_Data[2];	
 176              		.loc 1 41 2 is_stmt 1 view .LVU23
  43:Core/Src/MPU6050.c **** 	
 177              		.loc 1 43 2 view .LVU24
 178 001a 4FF47A73 		mov	r3, #1000
 179 001e 0293     		str	r3, [sp, #8]
 180 0020 0223     		movs	r3, #2
 181 0022 0193     		str	r3, [sp, #4]
 182 0024 05AB     		add	r3, sp, #20
 183 0026 0093     		str	r3, [sp]
 184 0028 0123     		movs	r3, #1
 185 002a 4322     		movs	r2, #67
 186 002c D021     		movs	r1, #208
 187 002e 0E48     		ldr	r0, .L11+8
 188 0030 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 189              	.LVL5:
  47:Core/Src/MPU6050.c ****     //set the the scale of gyro to +-250 by setting FS_Sel to zero
 190              		.loc 1 47 2 view .LVU25
  47:Core/Src/MPU6050.c ****     //set the the scale of gyro to +-250 by setting FS_Sel to zero
 191              		.loc 1 47 36 is_stmt 0 view .LVU26
 192 0034 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
  47:Core/Src/MPU6050.c ****     //set the the scale of gyro to +-250 by setting FS_Sel to zero
 193              		.loc 1 47 58 view .LVU27
 194 0038 9DF81500 		ldrb	r0, [sp, #21]	@ zero_extendqisi2
  47:Core/Src/MPU6050.c ****     //set the the scale of gyro to +-250 by setting FS_Sel to zero
 195              		.loc 1 47 15 view .LVU28
 196 003c 40EA0320 		orr	r0, r0, r3, lsl #8
 197 0040 00B2     		sxth	r0, r0
  47:Core/Src/MPU6050.c ****     //set the the scale of gyro to +-250 by setting FS_Sel to zero
 198              		.loc 1 47 13 view .LVU29
 199 0042 0A4B     		ldr	r3, .L11+12
 200 0044 1880     		strh	r0, [r3]	@ movhi
  50:Core/Src/MPU6050.c **** 
 201              		.loc 1 50 2 is_stmt 1 view .LVU30
  50:Core/Src/MPU6050.c **** 
 202              		.loc 1 50 20 is_stmt 0 view .LVU31
 203 0046 FFF7FEFF 		bl	__aeabi_i2d
 204              	.LVL6:
 205 004a 05A3     		adr	r3, .L11
 206 004c D3E90023 		ldrd	r2, [r3]
 207 0050 FFF7FEFF 		bl	__aeabi_ddiv
 208              	.LVL7:
 209 0054 FFF7FEFF 		bl	__aeabi_d2f
 210              	.LVL8:
  50:Core/Src/MPU6050.c **** 
 211              		.loc 1 50 8 view .LVU32
 212 0058 054B     		ldr	r3, .L11+16
 213 005a 1860     		str	r0, [r3]	@ float
 214              	.LBE2:
 215              		.loc 1 53 1 view .LVU33
 216 005c DAE7     		b	.L7
ARM GAS  C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s 			page 6


 217              	.L12:
 218 005e 00BF     		.align	3
 219              	.L11:
 220 0060 00000000 		.word	0
 221 0064 00606040 		.word	1080057856
 222 0068 00000000 		.word	I2CHandle
 223 006c 00000000 		.word	Gyro_Y_RAW
 224 0070 00000000 		.word	GyroY
 225              		.cfi_endproc
 226              	.LFE131:
 228              		.comm	GyroY,4,4
 229              		.comm	Gyro_Y_RAW,2,2
 230              		.text
 231              	.Letext0:
 232              		.file 2 "c:\\stm32projects\\toolchain\\gcc-arm\\arm-none-eabi\\include\\machine\\_default_types.h"
 233              		.file 3 "c:\\stm32projects\\toolchain\\gcc-arm\\arm-none-eabi\\include\\sys\\_stdint.h"
 234              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 235              		.file 5 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/system_stm32f3xx.h"
 236              		.file 6 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f303xe.h"
 237              		.file 7 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_def.h"
 238              		.file 8 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dma.h"
 239              		.file 9 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_i2c.h"
 240              		.file 10 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal.h"
 241              		.file 11 "Core/Inc/MPU6050.h"
ARM GAS  C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 MPU6050.c
C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s:18     .text.MPU6050_Init:00000000 $t
C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s:26     .text.MPU6050_Init:00000000 MPU6050_Init
C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s:126    .text.MPU6050_Init:00000084 $d
C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s:134    .text.MPU6050_Read_Gyro:00000000 $t
C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s:141    .text.MPU6050_Read_Gyro:00000000 MPU6050_Read_Gyro
C:\Users\pierc\AppData\Local\Temp\ccsGHFUE.s:220    .text.MPU6050_Read_Gyro:00000060 $d
                            *COM*:00000002 Gyro_Y_RAW
                            *COM*:00000004 GyroY

UNDEFINED SYMBOLS
HAL_I2C_Mem_Read
HAL_I2C_Mem_Write
I2CHandle
__aeabi_i2d
__aeabi_ddiv
__aeabi_d2f
HAL_I2C_IsDeviceReady
